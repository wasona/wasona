---
import "selo-components/common.css"; // has to be above site-specific css

import PageNav from "@/components/PageNav.astro";
import "@/global.css";
import { getLang, posts, prevnexts } from "@/lib/content";
import { render } from "astro:content";
import { Layout } from "selo-components";

export const getStaticPaths = async () =>
  posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));

const post = Astro.props;
const { Content } = await render(Astro.props);
const lang = getLang(post);
const prevnext = post.filePath!.includes("index.md")
  ? undefined
  : prevnexts[lang][post.id];
---

<Layout
  title={post.data.title}
  description={post.data.description}
  dir={["he", "ar"].includes(lang) ? "rtl" : "ltr"}
>
  <!-- Noto Sans Hebrew -->
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@100..900&display=swap"
    rel="stylesheet"
    slot="head"
  />
  <!-- Noto Sans Arabic -->
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@100..900&display=swap"
    rel="stylesheet"
  />
  <PageNav prevnext={prevnext} current={post.id} slot="pagenav" />
  <Content />
</Layout>
